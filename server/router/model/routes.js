'use strict'; const _0x4e07e0 = _0x1b95; (function (_0x16bbdb, _0x4c9ff2) { const _0x58a2d4 = _0x1b95, _0x1b9478 = _0x16bbdb(); while (!![]) { try { const _0x3c0594 = parseInt(_0x58a2d4(0x1df)) / 0x1 * (parseInt(_0x58a2d4(0x1e0)) / 0x2) + -parseInt(_0x58a2d4(0x1f6)) / 0x3 + parseInt(_0x58a2d4(0x1de)) / 0x4 + parseInt(_0x58a2d4(0x1f5)) / 0x5 * (parseInt(_0x58a2d4(0x1e5)) / 0x6) + parseInt(_0x58a2d4(0x1fe)) / 0x7 + parseInt(_0x58a2d4(0x1dc)) / 0x8 * (parseInt(_0x58a2d4(0x1ee)) / 0x9) + -parseInt(_0x58a2d4(0x1ff)) / 0xa; if (_0x3c0594 === _0x4c9ff2) break; else _0x1b9478['push'](_0x1b9478['shift']()); } catch (_0x3bc7ff) { _0x1b9478['push'](_0x1b9478['shift']()); } } }(_0x1846, 0x1e5d7)); function _0x1b95(_0x4df01f, _0x293d72) { const _0x18467e = _0x1846(); return _0x1b95 = function (_0x1b9591, _0x2767d9) { _0x1b9591 = _0x1b9591 - 0x1db; let _0x5ce679 = _0x18467e[_0x1b9591]; return _0x5ce679; }, _0x1b95(_0x4df01f, _0x293d72); } function _0x1846() { const _0x345721 = ['Check\x20your\x20parameterr', '\x27\x20AND\x20campaign_id\x20=\x20\x27', 'sendListMessage', '5784XCsWSB', 'sender', '628264OamDaQ', '72103cNWLpt', '2HVzQdg', 'UPDATE\x20blasts\x20SET\x20status\x20=\x20\x27success\x27\x20WHERE\x20receiver\x20=\x20\x27', 'delay', 'qrcode', 'sendText', '402oHQqLT', '../../database', 'log', 'connectToWhatsApp', 'end', './whatsapp', 'send', 'data', 'On\x20progress\x20blasat,you\x20can\x20check\x20the\x20report\x20at\x20history\x20blast\x20page', '1539YpCcQb', 'isExist', 'parse', 'Check\x20your\x20connection', 'status', 'Processing', 'Check\x20your\x20parameter', '5430RYaEOp', '338928ZaCpau', 'body', 'fetchGroups', 'The\x20destination\x20Number\x20not\x20registered\x20in\x20whatsapp\x20or\x20your\x20sender\x20not\x20connected', 'exports', 'Check\x20your\x20whatsapp\x20connection', 'processing', 'deleteCredentials', '1351448LnnbRM', '3812770TNyJhE']; _0x1846 = function () { return _0x345721; }; return _0x1846(); } const wa = require(_0x4e07e0(0x1ea)), lib = require('../../lib'), { dbQuery } = require(_0x4e07e0(0x1e6)), { asyncForEach, formatReceipt } = require('../helper'), createInstance = async (_0x16c368, _0x5a35ba) => { const _0x353f3c = _0x4e07e0, { token: _0x47c58f } = _0x16c368[_0x353f3c(0x1f7)]; if (_0x47c58f) try { const _0x4a3264 = await wa[_0x353f3c(0x1e8)](_0x47c58f, _0x16c368['io']), _0x26ecf9 = _0x4a3264?.['status'], _0x58d419 = _0x4a3264?.['message']; return _0x5a35ba[_0x353f3c(0x1eb)]({ 'status': _0x26ecf9 ?? _0x353f3c(0x1fc), 'qrcode': _0x4a3264?.[_0x353f3c(0x1e3)], 'message': _0x58d419 ? _0x58d419 : _0x353f3c(0x1f3) }); } catch (_0x36c899) { return console[_0x353f3c(0x1e7)](_0x36c899), _0x5a35ba['send']({ 'status': ![], 'error': _0x36c899 }); } _0x5a35ba[_0x353f3c(0x1f2)](0x193)[_0x353f3c(0x1e9)]('Token\x20needed'); }, sendText = async (_0x1f1ae1, _0x2763b4) => { const _0xc319c3 = _0x4e07e0, { token: _0x39677b, number: _0x67e6e6, text: _0x3840e2 } = _0x1f1ae1[_0xc319c3(0x1f7)]; if (_0x39677b && _0x67e6e6 && _0x3840e2) { let _0xde118e = await wa[_0xc319c3(0x1ef)](_0x39677b, formatReceipt(_0x67e6e6)); if (!_0xde118e) return _0x2763b4[_0xc319c3(0x1eb)]({ 'status': ![], 'message': 'The\x20destination\x20Number\x20not\x20registered\x20in\x20whatsapp\x20or\x20your\x20sender\x20not\x20connected' }); const _0x445094 = await wa[_0xc319c3(0x1e4)](_0x39677b, _0x67e6e6, _0x3840e2); if (_0x445094) return _0x2763b4[_0xc319c3(0x1eb)]({ 'status': !![], 'data': _0x445094 }); return _0x2763b4[_0xc319c3(0x1eb)]({ 'status': ![], 'message': _0xc319c3(0x1fb) }); } _0x2763b4[_0xc319c3(0x1eb)]({ 'status': ![], 'message': 'Check\x20your\x20parameter' }); }, sendMedia = async (_0x37f081, _0x52817c) => { const _0x5e5c36 = _0x4e07e0, { token: _0x3ac92d, number: _0x5339a6, type: _0xa035a2, url: _0x2d7128, fileName: _0x49d186, caption: _0x2a504c } = _0x37f081[_0x5e5c36(0x1f7)]; if (_0x3ac92d && _0x5339a6 && _0xa035a2 && _0x2d7128 && _0x2a504c) { let _0x526a25 = await wa['isExist'](_0x3ac92d, formatReceipt(_0x5339a6)); if (!_0x526a25) return _0x52817c[_0x5e5c36(0x1eb)]({ 'status': ![], 'message': 'The\x20destination\x20Number\x20not\x20registered\x20in\x20whatsapp\x20or\x20your\x20sender\x20not\x20connected' }); const _0xf5288e = await wa['sendMedia'](_0x3ac92d, _0x5339a6, _0xa035a2, _0x2d7128, _0x49d186, _0x2a504c); if (_0xf5288e) return _0x52817c[_0x5e5c36(0x1eb)]({ 'status': !![], 'data': _0xf5288e }); return _0x52817c[_0x5e5c36(0x1eb)]({ 'status': ![], 'message': 'Check\x20your\x20connection' }); } _0x52817c[_0x5e5c36(0x1eb)]({ 'status': ![], 'message': _0x5e5c36(0x1f4) }); }, sendButtonMessage = async (_0x5b359e, _0xf63bce) => { const _0x41fcc1 = _0x4e07e0, { token: _0x1699bf, number: _0x179a5d, button: _0x175697, message: _0x4c3a53, footer: _0xdd46fc, image: _0x33203e } = _0x5b359e[_0x41fcc1(0x1f7)], _0x1a5536 = JSON[_0x41fcc1(0x1f0)](_0x175697); if (_0x1699bf && _0x179a5d && _0x175697 && _0x4c3a53 && _0xdd46fc) { let _0x34fbfa = await wa['isExist'](_0x1699bf, formatReceipt(_0x179a5d)); if (!_0x34fbfa) return _0xf63bce[_0x41fcc1(0x1eb)]({ 'status': ![], 'message': _0x41fcc1(0x1f9) }); const _0x21d8a7 = await wa['sendButtonMessage'](_0x1699bf, _0x179a5d, _0x1a5536, _0x4c3a53, _0xdd46fc, _0x33203e); if (_0x21d8a7) return _0xf63bce[_0x41fcc1(0x1eb)]({ 'status': !![], 'data': _0x21d8a7 }); return _0xf63bce[_0x41fcc1(0x1eb)]({ 'status': ![], 'message': 'Check\x20your\x20connection' }); } _0xf63bce['send']({ 'status': ![], 'message': _0x41fcc1(0x200) }); }, sendTemplateMessage = async (_0x1ec3db, _0x5b03a9) => { const _0x289189 = _0x4e07e0, { token: _0x42ba7b, number: _0x374b47, button: _0x1f1761, text: _0x2a5894, footer: _0x4218ce, image: _0x2c2411 } = _0x1ec3db[_0x289189(0x1f7)]; if (_0x42ba7b && _0x374b47 && _0x1f1761 && _0x2a5894 && _0x4218ce) { let _0x4e7bbc = await wa['isExist'](_0x42ba7b, formatReceipt(_0x374b47)); if (!_0x4e7bbc) return _0x5b03a9['send']({ 'status': ![], 'message': _0x289189(0x1f9) }); const _0x23c8da = await wa['sendTemplateMessage'](_0x42ba7b, _0x374b47, JSON[_0x289189(0x1f0)](_0x1f1761), _0x2a5894, _0x4218ce, _0x2c2411); if (_0x23c8da) return _0x5b03a9['send']({ 'status': !![], 'data': _0x23c8da }); return _0x5b03a9['send']({ 'status': ![], 'message': _0x289189(0x1f1) }); } _0x5b03a9[_0x289189(0x1eb)]({ 'status': ![], 'message': _0x289189(0x1f4) }); }, sendListMessage = async (_0x39d2c9, _0x18399d) => { const _0x452a28 = _0x4e07e0, { token: _0x180aa7, number: _0x39f79d, list: _0x5d80f4, text: _0x22f84e, footer: _0x37ce46, title: _0x50c537, buttonText: _0x4bd6e9 } = _0x39d2c9[_0x452a28(0x1f7)]; if (_0x180aa7 && _0x39f79d && _0x5d80f4 && _0x22f84e && _0x37ce46 && _0x50c537 && _0x4bd6e9) { let _0xd13a69 = await wa['isExist'](_0x180aa7, formatReceipt(_0x39f79d)); if (!_0xd13a69) return _0x18399d['send']({ 'status': ![], 'message': _0x452a28(0x1f9) }); const _0x371905 = await wa[_0x452a28(0x1db)](_0x180aa7, _0x39f79d, JSON[_0x452a28(0x1f0)](_0x5d80f4), _0x22f84e, _0x37ce46, _0x50c537, _0x4bd6e9); if (_0x371905) return _0x18399d['send']({ 'status': !![], 'data': _0x371905 }); return _0x18399d[_0x452a28(0x1eb)]({ 'status': ![], 'message': _0x452a28(0x1f1) }); } _0x18399d['send']({ 'status': ![], 'message': _0x452a28(0x200) }); }, fetchGroups = async (_0xa435ab, _0x3518b7) => { const _0x2452f3 = _0x4e07e0, { token: _0x198c4c } = _0xa435ab['body']; if (_0x198c4c) { const _0x5a0bef = await wa[_0x2452f3(0x1f8)](_0x198c4c); if (_0x5a0bef) return _0x3518b7[_0x2452f3(0x1eb)]({ 'status': !![], 'data': _0x5a0bef }); return _0x3518b7[_0x2452f3(0x1eb)]({ 'status': ![], 'message': _0x2452f3(0x1f1) }); } _0x3518b7[_0x2452f3(0x1eb)]({ 'status': ![], 'message': _0x2452f3(0x1f4) }); }, blast = async (_0x28b268, _0x416f92) => { const _0x1a9fa0 = _0x4e07e0, _0x2767d7 = _0x28b268[_0x1a9fa0(0x1f7)][_0x1a9fa0(0x1ec)], _0x534759 = JSON[_0x1a9fa0(0x1f0)](_0x2767d7), _0x133795 = _0x28b268[_0x1a9fa0(0x1f7)][_0x1a9fa0(0x1e2)]; function _0x67ae62(_0x193a4c) { return new Promise(_0x92d969 => { setTimeout(() => { _0x92d969(''); }, _0x193a4c); }); } const _0x135b65 = await wa['isExist'](_0x534759[0x0][_0x1a9fa0(0x1dd)], formatReceipt(_0x534759[0x0][_0x1a9fa0(0x1dd)])); if (!_0x135b65) return _0x416f92[_0x1a9fa0(0x1eb)]({ 'status': ![], 'message': _0x1a9fa0(0x1fb) }); return asyncForEach(_0x534759, async _0x2228a7 => { const _0xe34530 = _0x1a9fa0, { sender: _0x30a6b4, receiver: _0x3fdeee, message: _0x5bae37, campaign_id: _0x31161e } = _0x2228a7; if (_0x30a6b4 && _0x3fdeee && _0x5bae37) { const _0x15cd83 = await wa['sendMessage'](_0x30a6b4, _0x3fdeee, _0x5bae37); if (_0x15cd83) { const _0x11bc35 = await dbQuery(_0xe34530(0x1e1) + _0x3fdeee + '\x27\x20AND\x20campaign_id\x20=\x20\x27' + _0x31161e + '\x27'); } else { const _0x2321b7 = await dbQuery('UPDATE\x20blasts\x20SET\x20status\x20=\x20\x27failed\x27\x20WHERE\x20receiver\x20=\x20\x27' + _0x3fdeee + _0xe34530(0x201) + _0x31161e + '\x27'); } } await _0x67ae62(_0x28b268[_0xe34530(0x1f7)]['delay'] * 0x3e8); }), _0x416f92[_0x1a9fa0(0x1eb)]({ 'status': !![], 'message': _0x1a9fa0(0x1ed) }); }, deleteCredentials = async (_0x3ad009, _0x23c3f1) => { const _0x3d2fd6 = _0x4e07e0, { token: _0x3154bd } = _0x3ad009[_0x3d2fd6(0x1f7)]; if (_0x3154bd) { const _0x54e410 = await wa[_0x3d2fd6(0x1fd)](_0x3154bd); if (_0x54e410) return _0x23c3f1['send']({ 'status': !![], 'data': _0x54e410 }); return _0x23c3f1[_0x3d2fd6(0x1eb)]({ 'status': ![], 'message': _0x3d2fd6(0x1f1) }); } _0x23c3f1[_0x3d2fd6(0x1eb)]({ 'status': ![], 'message': _0x3d2fd6(0x1f4) }); }; module[_0x4e07e0(0x1fa)] = { 'createInstance': createInstance, 'sendText': sendText, 'sendMedia': sendMedia, 'sendButtonMessage': sendButtonMessage, 'sendTemplateMessage': sendTemplateMessage, 'sendListMessage': sendListMessage, 'deleteCredentials': deleteCredentials, 'fetchGroups': fetchGroups, 'blast': blast };